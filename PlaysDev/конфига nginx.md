```
server {
```

```
    listen 80;  # Указывает, что сервер будет слушать на порту 80 (HTTP).
```

```
    listen [::]:80;  # Указывает, что сервер будет слушать на порту 80 для IPv6.
```

```
    server_name maxserver.zapto.org; # Указывает доменное имя, для которого этот сервер будет обрабатывать запросы.
```

```
    # Возвращаю ошибку 404 при попытке подключения через HTTP
```

```
    return 404;  # Возвращает ошибку 404 (не найдено) для всех запросов на этот сервер через HTTP.
```

```
}
```

```
server {
```

```
    listen 443 ssl;  # Указывает, что сервер будет слушать на порту 443 (HTTPS) с использованием SSL.
```

```
    listen [::]:443 ssl;  # Указывает, что сервер будет слушать на порту 443 для IPv6 с использованием SSL.
```

```
    server_name maxserver.zapto.org; # Указывает доменное имя, для которого этот сервер будет обрабатывать запросы.
```

```
    ssl_certificate /etc/letsencrypt/live/maxserver.zapto.org/fullchain.pem;  # Указывает путь к SSL сертификату.
```

```
    ssl_certificate_key /etc/letsencrypt/live/maxserver.zapto.org/privkey.pem;  # Указывает путь к приватному ключу SSL сертификата.
```

```
    location / {  # Определяет блок для обработки запросов к корневому URL (например, `https://maxserver.zapto.org/`).
```

```
        # Основная страница
```

```
        root /var/www/data/www;  # Указывает директорию, из которой будут обслуживаться файлы (основная страница).
```

```
    }
```

```
    location /secondpage {  # Определяет блок для обработки запросов к URL, начинающимся с `/secondpage`.
```

```
        # Вторая страница
```

```
        alias /var/www/data/secondpage;  # Указывает путь к директории с содержимым второй страницы.
```

```
    }
```

```
    location /music {  # Определяет блок для обработки запросов к URL, начинающимся с `/music`.
```

```
        alias /var/www/data/music/;  # Указывает путь к директории с музыкой.
```

```
        add_header Content-Disposition 'attachment';  # Заставляет браузер скачивать файл вместо его отображения.
```

```
        autoindex on;  # Включает отображение списка файлов в директории, если нет файла index.
```

```
    }
```

```
    location info.php {  # Определяет блок для обработки запросов к `info.php`.
```

```
        return 301 https://maxserver.zapto.org/;  # Перенаправляет все запросы к `info.php` на корневой URL с кодом 301 (постоянное перенаправление).
```

```
    }
```

```
    # Новый блок для редиректа на другой сервер
```

```
    location /SitePages {  # Определяет блок для обработки запросов к URL, начинающимся с `/SitePages`.
```

```
        proxy_pass https://www.eduportal44.ru;  # Проксирует запросы на указанный внешний сервер.
```

```
        proxy_redirect off;  # Отключает автоматическое изменение заголовка Location в ответах от проксируемого сервера.
```

```
        proxy_set_header Host www.eduportal44.ru;  # Передает заголовок Host от клиента к проксируемому серверу.
```

```
        proxy_set_header X-Real-IP $remote_addr;  # Передает реальный IP-адрес клиента к проксируемому серверу.
```

```
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # Передает информацию о прокси (IP-адреса).
```

```
    }
```

```
}
```

[[IPv6]]
[[коды ответов http]]
1. **Блоки `server`**: Определяют виртуальные серверы, которые обрабатывают запросы для определенных доменных имен или IP-адресов.
    
2. **Блоки `location`**: Определяют, как обрабатывать запросы к определенным URL-путям. Внутри блоков `location` можно указывать, как обрабатывать статические файлы, проксировать запросы и т. д.
    
3. **Директивы**: Команды, которые определяют поведение NGINX. Например, `listen`, `server_name`, `root`, `proxy_pass` и другие.

HTTP
Директива `http` используется для определения блока конфигурации, который содержит настройки для обработки HTTP-запросов. Внутри этого блока можно настраивать различные параметры, такие как кэширование, логирование, обработка запросов и другие настройки, которые применяются ко всем серверам и локациям внутри этого блока.

SERVER 
Директива `server` используется для определения виртуального сервера. Внутри этого блока можно настраивать параметры, такие как имя сервера, порты, корневая директория, обработка запросов и другие настройки, специфичные для данного виртуального хоста.

LOCATION
Директива `location` используется для определения, как обрабатывать запросы к определенным URL или путям. Она позволяет настраивать различные параметры для разных путей, таких как проксирование, кэширование, обработка статических файлов и другие настройки.

### Зачем использовать `sites-available`?
Хранение конфигураций в `sites-available` позволяет легко добавлять, изменять или удалять виртуальные хосты, не затрагивая основную конфигурацию Nginx. Это особенно полезно в больших проектах с множеством сайтов.

Для активации конфигурации виртуального хоста достаточно создать символическую ссылку на файл в директории `sites-enabled`. Это позволяет быстро включать или отключать сайты без необходимости редактирования основной конфигурации.

**Активация конфигурации**:
- Для активации конфигурации создается символическая ссылка в директории `sites-enabled`.